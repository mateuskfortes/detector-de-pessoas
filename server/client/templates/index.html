{% load static %}
<!doctype html>
<html lang="pt-br">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Object Classifier</title>

	<!-- Tailwind CSS CDN -->
	<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
	<nav class="bg-white shadow">
		<div class="container mx-auto px-4 py-4 flex justify-between items-center">
			<div class="flex items-center gap-3">
				<a href="/" class="text-xl font-semibold">Object Classifier</a>
			</div>
			<ul class="flex gap-6">
				<li><a href="/" class="text-gray-700 hover:text-blue-600">Início</a></li>
				<li><a href="#" class="text-gray-700 hover:text-blue-600">Sobre</a></li>
			</ul>
		</div>
	</nav>

	<main class="container mx-auto px-4 py-10 max-w-3x1">
		<h1 class="text-4xl font-bold mb-6 text-center">Classifique sua Imagem</h1>

		<form method="post" enctype="multipart/form-data" class="bg-white p-6 rounded shadow-md" id="uploadForm">
			{% csrf_token %}
			<div class="mb-4">
				<label for="image" class="block text-gray-700 font-semibold mb-2">Selecione uma imagem para classificar</label>
				<input 
					type="file" 
					name="image" 
					id="image" 
					required 
					accept="image/*"
					class="w-full border border-gray-300 rounded p-2 cursor-pointer"
					onchange="previewImage(event)"
				/>
			</div>

			<!-- Preview da imagem selecionada -->
			<div id="previewContainer" class="mb-4 hidden">
				<p class="text-gray-600 mb-2 font-semibold">Pré-visualização:</p>
				<img id="preview" src="#" alt="Pré-visualização da imagem" class="mx-auto max-h-64 rounded shadow-md border border-gray-300 object-contain" />
			</div>

			<button type="submit" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition">Classificar</button>
		</form>

		{% if classification %}
		<div class="mt-10 bg-white p-6 rounded shadow-md text-center">
			<h2 class="text-2xl font-semibold mb-4">Resultado da Classificação</h2>
			<p class="text-lg mb-4">A imagem foi classificada como:</p>
			<p class="text-3xl font-bold text-blue-600">{{ classification }}</p>
		</div>
		{% endif %}
	</main>

	<footer class="bg-white shadow mt-10 py-6 text-center text-gray-500">
		<small>&copy; {{ now.year }} Object Classifier</small>
	</footer>

	<script>
		function previewImage(event) {
			const previewContainer = document.getElementById('previewContainer');
			const preview = document.getElementById('preview');
			const file = event.target.files[0];

			if(file) {
				const reader = new FileReader();
				reader.onload = function(e) {
					preview.src = e.target.result;
					previewContainer.classList.remove('hidden');
				}
				reader.readAsDataURL(file);
			} else {
				preview.src = "#";
				previewContainer.classList.add('hidden');
			}
		}
	</script>
</body>
</html>
